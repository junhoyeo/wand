import db from './database'

const rawMap = '111111111111111111111111111111111111111111111111111111111111,100000000100000010000010000000000000000000000000001000000001,100000000100000010000010000000000000000000000000001000000001,100000000100000010000010000000000000000000000000001000000001,100000000100000010000010000011111111111111111111111000000001,100000000000000010000010000010000010000010000010001000000001,100000000000000011001110000010000010000010000010001111100111,100000000100000000000000000010000010000010000010000010000001,100000000100000000000000000010000010000010000010000010000001,100000000100000000000000000010000010000010000010000010000001,100000000100000000000000000010000010000010000010000010000001,100000000100000000000000000011001111001111001111001110000001,100000000100000000000000000000000000000000000000000000000001,100000000100000000000000000000000000000000000000000000000001,100000000100000000000000000000000000000000000000000000000001,100000000100000000000000000000000000000000000000000000000001,100000000100000000000000000000000000000000000000000000000001,100000000100000000000000000000000000000000000000000000000001,100000000000000000000000000000000000000000000000000000000001,100000000000000000000000000000000000000000000000000000000001,100000000100000000000000000000000000000000000000000000000001,100000000111111100110000001110111111111111111110011111111111,100000000100000000010000001000000000000000001000000000000001,100000000100000000010000001000000000000000001000000000000001,100000000100000000010000001000000000000000001000000000000001,100000000100000000010000001000000000000000001000000000000001,100000000100000000010000001000000000000000001000000000000001,100000000000000000010000001000000000000000001000000000000001,100000000000000000010000001000000000000000001000000000000001,111111111111111111111111111111111111111111111111111111111111'
const testMap = rawMap.split(',').map(line =>
  line.split('').map(cell => Number(cell)))

const testDomains = [
  { label: "대강당", start: [1, 1], end: [8, 28] }, 
  { label: "휴게실", start: [10, 22], end: [18, 28] },
  { label: "화장실", start: [17, 1], end: [21, 5] },
  { label: "121 진행실", start: [29, 5], end: [33, 10] },
  { label: "사무실", start: [35, 5], end: [39, 10] },
  { label: "회의실", start: [41, 5], end: [45, 10] },
  { label: "휴게실", start: [47, 7], end: [51, 10] },
  { label: "다목적룸", start: [51, 1], end: [58, 5] },
  { label: "오피스존", start: [45, 22], end: [58, 28] },
  { label: "사무실", start: [27, 22], end: [43, 28] }
]

db.defaults({
  places: [],
  maps: [],
  domains: [],
})
  .write()

db.get('places')
  .push({
    id: 0,
    type: '교육 센터',
    name: '대웅경영개발원',
    address: '경기도 용인시 처인구 포곡읍 두계로 72',
    notice: '컨벤션대강당 로비 타일 교체 작업 중 출입을 제한합니다.',
  })
  .write()

db.get('maps')
  .push({
    id: 0,
    map: testMap,
  })
  .write()

testDomains.forEach((domain, idx) => 
  db.get('domains').push({
    id: idx,
    placeId: 0,
    data: domain
  })
    .write())

console.log(db.getState())
